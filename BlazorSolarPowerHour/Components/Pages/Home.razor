@inject MQTTUIService service
@page "/"

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

@code {
    protected override async Task OnInitializedAsync()
    {
        await service.SetupMQTT(GotMessage);
        await service.SubscribeAsync(); //TODO: unsub later
    }

    private async Task GotMessage(MqttApplicationMessageReceivedEventArgs args)
    {
        // DO WORK HERE
        // StateHasChanged?
    }

}
